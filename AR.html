<!DOCTYPE html>  
<html lang="zh">  
<head>  
    <meta charset="UTF-8">  
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">  
    <title>AR.js Example</title>  
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>  
    <script src="https://cdn.jsdeliv.com/ajax/libs/ar.js/2.2.2/aframe-ar.min.js"></script>  
    <style>  
        body { margin: 0; overflow: hidden; }  
    </style>  
</head>  
<body>  
    <a-scene   
        renderer="logarithmicDepthBuffer: true;"   
        embedded   
        arjs="trackingMethod: best; sourceType: webcam; debugUIEnabled: false;"  
    >  
        <!-- 使用Hiro标记 -->  
        <a-marker preset="hiro">  
            <!-- 3D模型 -->  
            <a-entity   
                position="0 0 0"  // 将模型放置在标记的正中心  
                rotation="0 0 0"  
                scale="0.05 0.05 0.05"  // 减小缩放比例，使模型更紧凑  
                gltf-model="https://raw.githubusercontent.com/nnnnakosuki/AR/refs/heads/main/assets/models/cute_spooky_cat_gltf/scene.gltf"  
            >  
            </a-entity>  
        </a-marker>  

        <!-- 摄像头 -->  
        <a-entity camera></a-entity>  
    </a-scene>  

    <script>  
        // 手势控制组件  
        AFRAME.registerComponent('gesture-handler', {  
            schema: {  
                enabled: { default: true }  
            },  
            init: function () {  
                this.scale = 1;  
                this.initialScale = 1;  
                this.lastRotationY = 0;  

                // 缩放事件  
                this.el.addEventListener('pinchstart', (evt) => {  
                    this.initialScale = this.scale;  
                });  

                this.el.addEventListener('pinchmove', (evt) => {  
                    this.scale = this.initialScale * evt.detail.scale;  
                    this.el.setAttribute('scale', {   
                        x: this.scale * 0.05,   
                        y: this.scale * 0.05,   
                        z: this.scale * 0.05   
                    });  
                });  

                // 旋转事件  
                this.el.addEventListener('touchmove', (evt) => {  
                    if (evt.touches.length === 1) {  
                        const touch = evt.touches[0];  
                        const deltaX = touch.clientX - (window.innerWidth / 2);  
                        this.lastRotationY += deltaX * 0.5;  
                        this.el.setAttribute('rotation', {   
                            x: 0,   
                            y: this.lastRotationY,   
                            z: 0   
                        });  
                    }  
                });  
            }  
        });  

        // 将手势控制添加到模型  
        document.querySelector('a-entity[gltf-model]').setAttribute('gesture-handler', '');  
    </script>  
</body>  
</html>