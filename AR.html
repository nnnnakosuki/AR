<!DOCTYPE html>  
<html lang="zh">  
<head>  
    <meta charset="UTF-8">  
    <meta name="viewport" content="width=device-width, initial-scale=1.0">  
    <title>AR.js Example</title>  
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>  
    <script src="https://cdn.rawgit.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>  
    <script src="https://unpkg.com/aframe-gesture-detector/dist/aframe-gesture-detector.min.js"></script>  
</head>  
<body>  
    <script>  
        // AFRAME.registerComponent('registerevents', {  
        //     init: function () {  
        //         var marker = this.el;  

        //         marker.setAttribute('emitevents', true);  
        //         marker.addEventListener('markerFound', function () {  
        //             var markerId = marker.id;  
        //             console.log('Marker found: ', markerId);  
        //         });  

        //         marker.addEventListener('markerLost', function () {  
        //             var markerId = marker.id;  
        //             console.log('Marker lost: ', markerId);  
        //         });  
        //     }  
        // });  

        AFRAME.registerComponent('gesture-controls', {  
            schema: {  
                scaleFactor: { type: 'number', default: 0.1 }  
            },  
            init: function () {  
                this.scale = 1;  
                this.initialScale = 1;  

                this.el.addEventListener('gesturestart', (event) => {  
                    this.initialScale = this.scale;  
                });  

                this.el.addEventListener('gesturechange', (event) => {  
                    this.scale = this.initialScale * event.detail.scale;  
                    this.el.setAttribute('scale', { x: this.scale, y: this.scale, z: this.scale });  
                });  

                this.el.addEventListener('gestureend', (event) => {  
                    this.initialScale = this.scale;  
                });  

                this.el.addEventListener('touchmove', (event) => {  
                    if (event.touches.length === 1) {  
                        const touch = event.touches[0];  
                        const rotationY = (touch.clientX / window.innerWidth) * 360;  
                        this.el.setAttribute('rotation', { x: 0, y: rotationY, z: 0 });  
                    }  
                });  
            }  
        });  
    </script>  

    <a-scene embedded arjs='sourceType: webcam;'>  
        <a-marker preset='hiro'>  
            <a-entity gltf-model='url(https://raw.githubusercontent.com/nnnnakosuki/AR/refs/heads/main/assets/models/cute_spooky_cat_gltf/scene.gltf)' gesture-controls></a-entity>  
        </a-marker>  

        <!-- <a-entity camera look-controls></a-entity>   -->
    </a-scene>  
</body>  
</html>